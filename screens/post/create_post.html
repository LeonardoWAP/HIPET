<!DOCTYPE html>
<html lang="en">
<head>
    <link href='http://fonts.googleapis.com/css?family=Lato:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="../style.css">
    <link rel="stylesheet" href="../reset.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/croppie/2.6.5/croppie.css" integrity="sha512-2eMmukTZtvwlfQoG8ztapwAH5fXaQBzaMqdljLopRSA0i6YKM8kBAOrSSykxu9NN9HrtD45lIqfONLII2AFL/Q==" crossorigin="anonymous" referrerpolicy="no-referrer" />

    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body id="create-post">
    <section class=" mobile-container ">
		<header class="create-edit-header">
			<h1 class="title">Nova publicação</h1>
		</header>
        
        <div class="input-animal-img">
            <label for="formFileSm" class="form-label title">Adicione uma imagem do animal </label>
            <input clasFs="form-control form-control-sm" 
                    id="fileInput" 
                    type="file">   
            <div id="preview"> </div>           
        </div>

		<form class="create-post-form">
            
            <p class="title">Informações sobre o animalzinho</p>

            <div class="form-check animalCheck" id="checkAnimalTypeCat">
                <input class="form-check-input" type="radio" name="flexRadioDefault" id="flexRadioDefault2" checked>
                <label class="form-check-label" for="flexRadioDefault2">
                    Gato
                </label>
            </div>

            <div class="form-check animalCheck" id="checkAnimalTypeDog">
                <input class="form-check-input" type="radio" name="flexRadioDefault" id="flexRadioDefault1">
                <label class="form-check-label" for="flexRadioDefault1">
                  Cachorro
                </label>
            </div>

            <p class="title">Qual o sexo do animalzinho?</p>

            <div class="form-check animalCheck" id="checkAnimalSexMacho">
                <input class="form-check-input" type="radio" name="flexRadioDefaultSex" id="flexRadioDefaultSex2" checked>
                <label class="form-check-label" for="flexRadioDefaultSex2">
                    Macho
                </label>
            </div>

            <div class="form-check animalCheck" id="checkAnimalSexFemea">
                <input class="form-check-input" type="radio" name="flexRadioDefaultSex" id="flexRadioDefaultSex1">
                <label class="form-check-label" for="flexRadioDefaultSex1">
                  Fêmea
                </label>
            </div>
    
            <div class="create-post-form-input form-floating" id="animalName">
                <input type="text" class="form-control" id="floatingInputGroup1 " placeholder="AnimalName">
                <label for="floatingInputGroup1">Nome do animal</label>
            </div>
    
            <div class="form-floating create-post-form-input " id="animalAge">
                <input type="number" class="form-control" id="floatingInputGroup1 AnimalAge" placeholder="AnimalAge">
                <label for="floatingInputGroup1">Idade do animal ( em anos )</label>
			</div>

            <div class="create-post-form-input form-floating" id="animalColor">
                <select class="form-select" id="floatingSelectGrid">
                    <option selected>Escolha uma cor</option>
                    <option value="PRETO">Preto</option>
                    <option value="BRANCO">Branco</option>
                    <option value="CARAMELO">Caramelo</option>
                    <option value="MANCHADO">Manchado</option>
                    <option value="CINZA">Cinza</option>
                    <option value="RAJADO">Rajado</option>
                    <option value="MARROM">Marrom</option>
                    <option value="PINTADO">Pintado</option>
                </select>
                <label for="floatingSelectGrid">Qual cor predomina mais?</label>
            </div>

            <div class="create-post-form-input form-floating" id="animalSize">
                <select class="form-select" id="floatingSelectGrid">
                    <option selected>Escolha um tamanho</option>
                    <option value="PEQUENO">Pequeno</option>
                    <option value="MEDIO">Medio</option>

                    <option value="GRANDE">Grande</option>
                </select>
                <label for="floatingSelectGrid">Qual o porte do animal?</label>
            </div>
             
            <p class="title">Informações de saúde</p>

            <article class="checkbox-info checkbox-health-info">
            
                <div class="form-check form-switch" id="checkbox-info-castreated">
                    <input class="form-check-input" type="checkbox" role="switch" id="flexSwitchCheckDefault castrado">
                    <label class="form-check-label" for="flexSwitchCheckDefault">É castrado?</label>
                </div>

                <div class="form-check form-switch" id="checkbox-info-vacinnated">
                    <input class="form-check-input" type="checkbox" role="switch" id="flexSwitchCheckDefault castrado">
                    <label class="form-check-label" for="flexSwitchCheckDefault">É vacinado?</label>
                </div>

                <div class="form-check form-switch" id="checkbox-info-spacial-care">
                    <input class="form-check-input" type="checkbox" role="switch" id="flexSwitchCheckDefault castrado">
                    <label class="form-check-label" for="flexSwitchCheckDefault">Necessita de cuidados especiais?</label>
                </div>
        
            </article>

            <p class="title">Mais informações</p>

            <div class="create-post-form-about input-high form-floating" id="aboutAnimal">
                <textarea class="form-control" placeholder="Leave a comment here" id="floatingTextarea2" style="height: 100px"></textarea>
                <label for="floatingTextarea2">Fale um pouco sobre o animalzinho</label>
            </div>

              <p class="title">Qual a localização do animal?</p>

            <div class=" create-post-form-input f orm-floating" id="state">
                <select class="form-select" size="5" aria-label="size 3 select example">
                    <option value="AC">AC</option>
                    <option value="AL">AL</option>
                    <option value="AP">AP</option>
                    <option value="AM">AM</option>
                    <option value="BA">BA</option>
                    <option value="CE">CE</option>
                    <option value="DF">DF</option>
                    <option value="ES">ES</option>
                    <option value="GO">GO</option>
                    <option value="MA">MA</option>
                    <option value="MT">MT</option>
                    <option value="MS">MS</option>
                    <option value="MG">MG</option>
                    <option value="PA">PA</option>
                    <option value="PB">PB</option>
                    <option value="PR">PR</option>
                    <option value="PE">PE</option>
                    <option value="PI">PI</option>
                    <option value="RJ">RJ</option>
                    <option value="RN">RN</option>
                    <option value="RS">RS</option>
                    <option value="RO">RO</option>
                    <option value="RR">RR</option>
                    <option value="SC">SC</option>
                    <option value="SP">SP</option>
                    <option value="SE">SE</option>
                    <option value="TO">TO</option>

                </select>
            </div>

			
		</form>

        <button class="button-purple" 
                id="buttonCreatePost" 
                type="button" 
                data-bs-target="#shareUserModal"
                data-bs-toggle="modal" >
           Criar publicação
        </button>
       
	</section>

    <footer class="feed-footer footer-container" id="new-post-footer">
        <a  href="../post/feed.html"> <img src="../../src/icon-home.svg"> </a>
    </footer>

    <div class="modal fade" 
        id="shareUserModal" 
        tabindex="-1" 
        aria-labelledby="exampleModalLabel" 
        aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h1 class="modal-title fs-5" 
                        id="exampleModalLabel">
                    </h1>
                    <button type="button" 
                            class="btn-close" 
                            data-bs-dismiss="modal" 
                            aria-label="Close">
                    </button>
                </div>
                <div class="modal-body">
                    
                </div>
            </div>

        </div>
    </div>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>
    
    <script src = "https://cdnjs.cloudflare.com/ajax/libs/croppie/2.6.5/croppie.min.js"></script>

    <script type="module" >

        import {createNewPost, imgCorreta } from "../../controllers/post.js"
        import {verify_login, } from "../../controllers/login.js"
        import {setUserIconFooter} from "../../controllers/user.js"

        verify_login()
        imgCorreta()

        setUserIconFooter(document.getElementById('new-post-footer'))

        var resize = $('#preview').croppie({
            enableExif: true,
            enableOrientation: true,
            viewport:{
                
                width: 370,
                height: 422,
                type:'square'
            },
            boundary:{
                width:400,
                height:450,
                
            }
        })

        $("#fileInput").on("change", function(){
            var reader = new FileReader();
            reader.onload = function(e){
                resize.croppie('bind',{
                    url: e.target.result
                });
            }
        reader.readAsDataURL(this.files[0]);
            
        })

    document.querySelector("#buttonCreatePost").addEventListener('click',  createNewPost.bind(null, resize))

    </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" 
    integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" 
    crossorigin="anonymous"></script>
</body>
</html>